<!DOCTYPE html>
<html lang="ja">
<head>
  
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162790219-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-162790219-1');
    </script>
    
    <script data-ad-client="ca-pub-7758429902812373" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <title>Python2.XとPython3.Xを共存させる - yasakura</title>
  
  <meta name="description" content="モチベーション Python2.X系とPython3.X系やpipとpip3を共存させて，必要に応じて切り替えて使いたい． Pythonのマイナ">
  
  <link href=/css/style.css rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600;900&display=swap" rel="stylesheet">
  
  <link rel="icon" href="https://yasakura.me/img/favicon.ico">
  
  <link rel="alternate" type="application/atom+xml" href="https://yasakura.me/index.xml" title="yasakura">
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@yasakurara" />
  <meta property="og:url" content="https://yasakura.me/post/manage-python3-and-python27/" />
  <meta property="og:title" content="Python2.XとPython3.Xを共存させる" />
  <meta property="og:image" content="https://yasakura.me/img/thumbnail.png" />
</head>
<body>
  <header class="header">
    <div class="title"><a href="https://yasakura.me/">yasakura</a></div>
    <nav id="navigation">
      <ul class="menu">
        <li><a href="https://yasakura.me//about/">ABOUT</a></li>
      </ul>
    </nav>
  </header>
<article class="post post-view">
  <header class="post-header">
    
    <p class="post-meta">2021.1.2</p>
    
    <h1 class="post-title">Python2.XとPython3.Xを共存させる</h1>
    <ul class="post-author">
      <li>
        <a href="https://twitter.com/yasakurara"><svg id="twitter-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><defs><style>.cls-1{fill:none;}.cls-2{fill:#1da1f2;}</style></defs><title>Twitter_Logo_Blue</title><rect class="cls-1" width="400" height="400"/><path class="cls-2" d="M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23"/></svg>@yasakurara</a>
      </li>
    </ul>
    
    <ul class="post-tags">
      
      <li><a href="https://yasakura.me/tags/python/">#Python</a></li>
      
    </ul>
    
    <div class="share">
    <a href="https://twitter.com/share?url=https%3a%2f%2fyasakura.me%2fpost%2fmanage-python3-and-python27%2f&text=Python2.X%e3%81%a8Python3.X%e3%82%92%e5%85%b1%e5%ad%98%e3%81%95%e3%81%9b%e3%82%8b - yasakura" rel="nofollow" target="_blank" class="tw">Twitter</a>
    <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fyasakura.me%2fpost%2fmanage-python3-and-python27%2f" class="fb" target="_blank" rel="nofollow">Facebook</a>
    <a href="http://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fyasakura.me%2fpost%2fmanage-python3-and-python27%2f&title=Python2.X%e3%81%a8Python3.X%e3%82%92%e5%85%b1%e5%ad%98%e3%81%95%e3%81%9b%e3%82%8b - yasakura" class="ht" target="_blank" rel="nofollow">Hatena</a>
</div>
  </header>
  
  
  <div class="post-adsense" align="center">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-7758429902812373"
        data-ad-slot="2928625484"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  
  
  <div class="post-content">
    
<h1>Table of Contents</h1>
<nav id="TableOfContents">
<ul>
<li><a href="#モチベーション">モチベーション</a></li>
<li><a href="#pyenvでpythonのバージョンを切り替える">pyenvでPythonのバージョンを切り替える</a>
<ul>
<li><a href="#システム全体のpythonバージョンを切り替える">システム全体のPythonバージョンを切り替える</a></li>
<li><a href="#特定のディレクトリ内のみに特定のpythonバージョンを設定する">特定のディレクトリ内のみに特定のPythonバージョンを設定する</a></li>
</ul></li>
<li><a href="#venvでパッケージを分離する">venvでパッケージを分離する</a></li>
<li><a href="#pip-freeze-と-pip-list-の違い"><code>pip freeze</code>と<code>pip list</code>の違い</a></li>
</ul>
</nav>

    

<h1 id="モチベーション">モチベーション</h1>

<ul>
<li>Python2.X系とPython3.X系やpipとpip3を共存させて，必要に応じて切り替えて使いたい．</li>
<li>Pythonのマイナーバージョンを細かく切り替えたい．</li>
<li>pipでパッケージをインストールすると環境が汚れてしまうのでプロジェクトごとにパッケージを管理したい．</li>
<li>「プロジェクトごとにDockerコンテナを立ち上げてそこでPythonを実行する」というような大げさな管理はしたくない．</li>
</ul>

<h1 id="pyenvでpythonのバージョンを切り替える">pyenvでPythonのバージョンを切り替える</h1>

<ol>
<li><p>デフォルトのPythonのバージョンを確認する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ python --version
Python <span style="color:#ae81ff">2</span>.7.16</code></pre></div></li>

<li><p><code>brew</code>で<a href="https://github.com/pyenv/pyenv">pyenv</a>をインストールする</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ brew install pyenv</code></pre></div></li>

<li><p>PATHなどを設定する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">export PYENV_ROOT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">/.pyenv&#34;</span>
export PATH<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PYENV_ROOT<span style="color:#e6db74">}</span>/bin:$PATH
eval <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>pyenv init -<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span></code></pre></div></li>

<li><p>pyenvで使用可能なPythonのバージョン一覧を確認する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ pyenv install -l
Available versions:
<span style="color:#ae81ff">2</span>.1.3
<span style="color:#ae81ff">2</span>.2.3
<span style="color:#ae81ff">2</span>.3.7
:
:</code></pre></div></li>

<li><p>任意のバージョンをインストールする</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ pyenv install <span style="color:#ae81ff">3</span>.9.0
:
Installed Python-3.9.0 to /Users/xxxx/.pyenv/versions/3.9.0</code></pre></div></li>

<li><p>切替可能なバージョンを確認する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ pyenv versions
<span style="color:#ae81ff">\*</span> system <span style="color:#f92672">(</span>set by /Users/xxxx/.pyenv/version<span style="color:#f92672">)</span>
  <span style="color:#ae81ff">3</span>.9.0</code></pre></div></li>
</ol>

<h2 id="システム全体のpythonバージョンを切り替える">システム全体のPythonバージョンを切り替える</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ pyenv global <span style="color:#ae81ff">3</span>.9.0

$ pyenv versions
    system
<span style="color:#ae81ff">\*</span> <span style="color:#ae81ff">3</span>.9.0 <span style="color:#f92672">(</span>set by /Users/xxxx/.pyenv/version<span style="color:#f92672">)</span>

$ python --version
Python <span style="color:#ae81ff">3</span>.9.0

$ pip -V
pip <span style="color:#ae81ff">20</span>.2.3 from /Users/xxxx/.pyenv/versions/3.9.0/lib/python3.9/site-packages/pip <span style="color:#f92672">(</span>python <span style="color:#ae81ff">3</span>.9<span style="color:#f92672">)</span></code></pre></div>
<h2 id="特定のディレクトリ内のみに特定のpythonバージョンを設定する">特定のディレクトリ内のみに特定のPythonバージョンを設定する</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ mkdir sandbox; cd sandbox

$ pyenv versions 
<span style="color:#ae81ff">\*</span> system
    <span style="color:#ae81ff">3</span>.9.0 <span style="color:#f92672">(</span>set by /Users/xxxx/.pyenv/version<span style="color:#f92672">)</span>

$ python --version
Python <span style="color:#ae81ff">2</span>.7.16

$ pyenv local <span style="color:#ae81ff">3</span>.9.0

$ cat .python-version
<span style="color:#ae81ff">3</span>.9.0

$ pyenv versions
    system
<span style="color:#ae81ff">\*</span> <span style="color:#ae81ff">3</span>.9.0 <span style="color:#f92672">(</span>set by /Users/xxxx/sandbox/.python-version<span style="color:#f92672">)</span>

$ python --version
Python <span style="color:#ae81ff">3</span>.9.0</code></pre></div>
<h1 id="venvでパッケージを分離する">venvでパッケージを分離する</h1>

<ol>
<li><p>pyenvでPythonを任意のバージョンに切り替える</p></li>

<li><p>インストール済みのパッケージを確認する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ pip list
Package    Version
---------- -------
pip        <span style="color:#ae81ff">20</span>.3.3
setuptools <span style="color:#ae81ff">49</span>.2.1</code></pre></div></li>

<li><p>仮想環境<code>&lt;target directory&gt;</code>を作成する．</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ python -m venv &lt;target directory&gt;

$ ls &lt;target directory&gt;
bin     include     lib     pyvenv.cfg</code></pre></div></li>

<li><p>仮想環境を実行する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ source &lt;target directory&gt;/bin/activate

<span style="color:#f92672">(</span>target directory name<span style="color:#f92672">)</span> $</code></pre></div></li>

<li><p>何かしらのパッケージをインストールし，仮想環境にパッケージがインストールされたことを確認する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ pip install selenium
:
Successfully installed selenium...

$ pip freeze
selenium<span style="color:#f92672">==</span><span style="color:#ae81ff">3</span>.141.0
urllib3<span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>.26.2</code></pre></div></li>

<li><p>仮想環境を終了する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#f92672">(</span>target directory name<span style="color:#f92672">)</span> $ deactivate

$</code></pre></div></li>

<li><p>元の環境と仮想環境のパッケージが分離されていることを確認する</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ pip freeze
$</code></pre></div></li>
</ol>

<h1 id="pip-freeze-と-pip-list-の違い"><code>pip freeze</code>と<code>pip list</code>の違い</h1>

<ul>
<li><code>pip list</code>は，その環境にインストールされているパッケージをすべて出力する．一方，<code>pip freeze</code>は，<code>setuptools</code>などの内部的なパッケージ群は出力せず，ユーザが本来必要としているパッケージ名とそのバージョンの一覧を出力する．</li>
<li><code>pip freeze &gt; requirements.txt</code>にて，パッケージ名とバージョン一覧を<code>requirements.txt</code>に書き出し，<code>pip install -r requirements.txt</code>を実行することで，パッケージ一覧を一括でインストールすることができる．</li>
</ul>

  </div>
  <footer class="post-footer">
    
    <ul class="post-tags">
      
      <li><a href="https://yasakura.me/tags/python/">#Python</a></li>
      
    </ul>
    
    <div class="share">
    <a href="https://twitter.com/share?url=https%3a%2f%2fyasakura.me%2fpost%2fmanage-python3-and-python27%2f&text=Python2.X%e3%81%a8Python3.X%e3%82%92%e5%85%b1%e5%ad%98%e3%81%95%e3%81%9b%e3%82%8b - yasakura" rel="nofollow" target="_blank" class="tw">Twitter</a>
    <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fyasakura.me%2fpost%2fmanage-python3-and-python27%2f" class="fb" target="_blank" rel="nofollow">Facebook</a>
    <a href="http://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fyasakura.me%2fpost%2fmanage-python3-and-python27%2f&title=Python2.X%e3%81%a8Python3.X%e3%82%92%e5%85%b1%e5%ad%98%e3%81%95%e3%81%9b%e3%82%8b - yasakura" class="ht" target="_blank" rel="nofollow">Hatena</a>
</div>
  </footer>
  
  
  <div class="post-adsense" align="center">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-7758429902812373"
        data-ad-slot="2928625484"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  
  
</article>


<div class="post-widget">
  <div class="twitter-widget">
    <a class="twitter-timeline" data-lang="en" data-width="300" href="https://twitter.com/yasakurara?ref_src=twsrc%5Etfw">Tweets by yasakurara</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>


<footer class="footer">
  <nav>
    <ul>
      <li><a href="https://yasakura.me//terms/">サイトポリシー</a></li>
      <li><a href="https://yasakura.me//privacy/">プライバシーポリシー</a></li>
    </ul>
  </nav>
  <span>&copy; 2021 yasakura</span>
</footer>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    },
    linebreaks: {
      automatic: true
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
</body>
</html>

